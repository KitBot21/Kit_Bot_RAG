# 테스트용 크롤러 설정 (2개 섹션만)
# 1. 일정: https://www.kumoh.ac.kr/ko/schedule_reg.do
# 2. 공지사항(학사안내): https://www.kumoh.ac.kr/ko/sub06_01_01_01.do

start_url: "https://www.kumoh.ac.kr/ko/index.do?sso=ok"
domain: "www.kumoh.ac.kr"

# Sitemap 사용
sitemap_index: "https://www.kumoh.ac.kr/sitemap_index.xml"

# 테스트: ko 섹션만
allow_sections: ["ko"]

# 특정 경로만 허용
allowed_path_prefixes: 
  - "/ko/schedule_reg.do"        # 일정
  - "/ko/sub06_01_01_01.do"      # 학사안내 공지사항

# 로그인 페이지 차단
block_login_pages: true

# 첨부파일 차단
attachment_policy: "blocklist"
attachment_allow_prefixes: []
attachment_block_prefixes: ["/cms/fileDownload.do"]

# 크롤링 제한 (테스트용)
max_pages: 100                   # 최대 100페이지만
request_timeout_sec: 10
request_sleep_sec: 0.7
user_agent: "KITBot/2.0 (CSEcapstone, contact: cdh5113@naver.com)"

# 저장소: JSON
storage: "json"
json_output_dir: "../data/test_crawled"
json_pretty_print: true          # 테스트니까 보기 좋게

# 로그
log_path: "../data/test_crawler.log"

# PII 정책
pii_policy:
  redact_email: true

# 제외 패턴
deny_patterns:
  - "/login"
  - "/signin"
  - "/auth"
  - "/popup"
  - "/print"
  - "/share"
  - "/download"
  - "/search"

# === 필터 설정 ===

# 날짜 필터 (2021년 이후)
date_filter:
  enabled: true
  cutoff_date: "2021-01-01"

# 품질 필터
quality_filter:
  enabled: true
  min_text_length: 100
  max_text_length: 500000
  min_word_count: 20
  
  skip_patterns:
    - "404 Not Found"
    - "404 error"
    - "페이지를 찾을 수 없습니다"
    - "요청하신 페이지가 존재하지 않습니다"
    - "접근 권한이 없습니다"
    - "Access Denied"
    - "로그인이 필요합니다"
    - "세션이 만료되었습니다"

# 본문 추출 설정
content_extraction:
  enabled: true
  keep_links: true
  keep_images: false
  custom_remove_selectors:
    - "div.top-banner"
    - "div.quick-menu"
    - "#util-menu"
    - ".advertisement"
  main_content_selector: null

# 로그인 페이지 감지
login_detection:
  enabled: true
  url_patterns:
    - "/login"
    - "/signin"
    - "/auth"
    - "/sso"
    - "loginForm"
  
  content_patterns:
    - "아이디"
    - "비밀번호"
    - "로그인"
    - "login"
    - "password"
    - "username"
    - "sign in"
  
  min_pattern_matches: 2

# 출력 설정
output:
  format: "json"
  include_metadata: true
  include_html: true
  compress: false
